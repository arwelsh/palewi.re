<!DOCTYPE html>
<html>
<head>
    <title>Where will the Regional Connector go?</title>
    <meta name="description" content="" />
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.2/leaflet.css" />
    <!--[if lte IE 8]><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.2/leaflet.ie.css"  /><![endif]-->
    <style type="text/css">
        /* RESET */
        html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outline:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}
        /* APP */
        html, body {
            width: 100%;
            height: 100%;
            overflow:hidden;
        }
        body {
            margin:0;
            padding: 0;
            font-family: Georgia, serif;
            font-size:14px;
        }
        #map-canvas {
            width: 100%;
            height: 100%;
            position: relative;
        }
        #map-container {
            width:100%;
            height:100%;
        }
        #map-canvas path {
          stroke-linecap: square;
        }
    </style>
    <script type="text/javascript" src='http://cdn.leafletjs.com/leaflet-0.6.2/leaflet.js'></script>
</head>
<body>
    <div id="map-container">
        <div id="map-canvas" style="width:100%; height:100%"></div>
    </div>
    
<script type="text/javascript">
{% include "wxwtf/regional_connector/data.json" %}
// Configure the basic map settings
var mapOptions = {
    maxZoom:16,
    minZoom:13,
    maxBounds: new L.LatLngBounds(
        new L.LatLng(36.1912, -112.044),
        new L.LatLng(31.5037, -122.3272)
    )
};
var map = new L.Map('map-canvas', mapOptions);
map.setView(new L.LatLng(34.052010515290775, -118.24619829654694), 15);

// Set default layer options
var layerOptions = {
    attribution: "Map data (c) <a href='http://www.openstreetmap.org/'>OpenStreetMap</a> contributors, <a href='http://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a>",
    subdomains: [
        'tiles1',
        'tiles2',
        'tiles3',
        'tiles4'
    ]
}

var createLayer = function(version) {
    var url = "http://{s}.latimes.com/quiet-la-" + version + "/{z}/{x}/{y}.png";
    return new L.TileLayer(url, layerOptions);
}

var createLineStyle = function(color) {
    return { 
        color: color,
        opacity: 1
    }
}

var createStationMarker = function(latlng, color) {
    return L.circleMarker(latlng, {
        radius: 6,
        fillColor: "white",
        color: color,
        weight: 3,
        opacity: 1,
        fillOpacity: 1
    });
}

var onEachFeature = function(feature, layer) {
    layer.bindPopup(feature.properties.STATION);
};

var base = createLayer("0.3.0");
map.addLayer(base);

L.geoJson(goldline, {style: createLineStyle('gold')}).addTo(map);
L.geoJson(redline, {style: createLineStyle('red')}).addTo(map);
L.geoJson(expoline, {style: createLineStyle('lightblue')}).addTo(map);
L.geoJson(blueline, {style: createLineStyle('blue')}).addTo(map);
L.geoJson(line, {
    style: { 
        color: 'black',
        opacity: 1,
        dashArray: "1,8"
    }
}).addTo(map);

L.geoJson(goldstations, {
    pointToLayer: function(f, ll) { return createStationMarker(ll, 'gold') },
    onEachFeature: onEachFeature
}).addTo(map);

L.geoJson(expostations, {
    pointToLayer: function(f, ll) { return createStationMarker(ll, 'lightblue') },
    onEachFeature: onEachFeature
}).addTo(map);

L.geoJson(bluestations, {
    pointToLayer: function(f, ll) { return createStationMarker(ll, 'blue') },
    onEachFeature: onEachFeature
}).addTo(map);

L.geoJson(redstations, {
    pointToLayer: function(f, ll) { return createStationMarker(ll, 'red') },
    onEachFeature: onEachFeature
}).addTo(map);

L.geoJson(stops, {
    pointToLayer: function(f, ll) { return createStationMarker(ll, 'black') },
    onEachFeature: onEachFeature
}).addTo(map);
</script>
</body>
</html>


